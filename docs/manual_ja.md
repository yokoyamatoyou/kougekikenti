# ユーザー向け日本語説明書

## はじめに
このツールはX(旧Twitter)の投稿を収集し、AIで攻撃性を分析するものです。

## 準備するもの
1. [OpenAI公式サイト](https://platform.openai.com/account/api-keys)にアクセスし、アカウントを作成またはログインします。
2. 「Create new secret key」を押してAPIキーを生成し、コピーします。
3. プロジェクトのルートに`.env`ファイルを作成し、下記のように設定します。

   ```env
   OPENAI_API_KEY=sk-...
   ```

   `.env.example`をコピーして編集しても構いません。

## インストールと起動
まずはPython 3.10以上をインストールしておくことを推奨します。

```bash
pip install -r requirements.txt
python aggression_analyzer/main.py
```

## 画面の基本的な使い方
- キーワード発見モードでは検索語と期間を入力して投稿を収集します。
- 個別ユーザー分析モードではユーザーIDと件数を指定して投稿を取得・分析します。
- スライダーで攻撃性しきい値を調整し、魚拓をまとめて作成できます。

## GUI 各入力欄の説明

| 項目 | 入力する内容 | できること |
| ---- | ------------ | ----------- |
| **XユーザーID** | 解析したいユーザーのID (例: `elonmusk`) | 指定したユーザーの投稿を収集します。 |
| **取得件数** | 収集する投稿数。空欄の場合は20件 | 入力した件数だけ投稿を取得します。 |
| **temperature** | 0〜1の数値。既定値は`0.5` | AIの出力のランダム性を調整します。通常はそのままで構いません。 |
| **top_p** | 0〜1の数値。既定値は`1.0` | 生成結果の多様性を制御します。通常は変更不要です。 |
| **自動選択スコア** (スライダー) | 0〜10の整数 | この値以上の攻撃性スコアを持つ投稿を自動で選択状態にします。 |
| **収集＆分析開始** ボタン | クリックで入力内容に基づき収集と分析を実行 | 投稿を取得しAI分析を行います。完了すると結果一覧が表示されます。 |
| **結果を保存** ボタン | 保存先ファイル名を指定 | 分析結果をExcel形式で保存します。 |
| **選択した投稿の魚拓をまとめて作成** ボタン | - | 選択済みの投稿をウェブ魚拓に登録し、取得したURLを結果に追記します。 |

進行状況はプログレスバーとステータス表示で確認できます。分析が終わると、各投稿に攻撃性スコアが付与され、色分けされます。高いスコアの投稿を選んで魚拓を作成し、証拠として保存できます。

## 出力されるExcelファイルについて
分析結果とユーザー情報のシートが保存されます。

## 注意事項・免責事項
- 本ツールの利用は自己責任で行ってください。
- Xや各サービスの利用規約を遵守してください。
- 過度な連続利用は避け、APIやXの制限を超えないようご注意ください。
